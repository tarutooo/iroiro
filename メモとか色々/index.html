<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>マイツールズ | タイマー＆メモ</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>マイツールズ</h1>
        <div class="subtitle">サイト内で完結する便利ツール集</div>
        <div class="tabs">
            <button class="tab-btn active" data-target="homeSection" onclick="switchTab(event)">ホーム</button>
            <button class="tab-btn" data-target="timerSection" onclick="switchTab(event)">タイマー</button>
            <button class="tab-btn" data-target="stopwatchSection" onclick="switchTab(event)">ストップウォッチ</button>
            <button class="tab-btn" data-target="calculatorSection" onclick="switchTab(event)">電卓</button>
            <button class="tab-btn" data-target="memoSection" onclick="switchTab(event)">メモ</button>
        </div>

        <!-- ホームセクション -->
        <div id="homeSection" class="section active">
            <div class="input-group">
                <p style="color:#444; line-height:1.7;">
                    ようこそ！このサイトはブラウザだけで使える「通知タイマー」「ストップウォッチ」「電卓」「メモ」機能をまとめたツールです。データは端末のブラウザに保存されるので、インターネット接続なしでも使えます。
                </p>
            </div>
            <div class="input-group">
                <ul style="color:#333; margin-left:18px; line-height:1.8;">
                    <li>タイマー: 秒/分/時間、または今日の時刻で通知をセット</li>
                    <li>ストップウォッチ: 開始/一時停止/リセット、ラップ記録と保存</li>
                    <li>電卓: 基本的な四則演算とメモリ機能、計算履歴保存</li>
                    <li>メモ: タイトル＋本文を保存、編集、削除、JSONエクスポート/インポート</li>
                    <li>通知: ブラウザ通知＋サイト内カード表示（許可が必要）</li>
                </ul>
            </div>
            <div class="controls" style="margin-top:10px;">
                <button class="tab-btn active" data-target="timerSection" onclick="switchTab(event)">タイマーを開く</button>
                <button class="tab-btn" data-target="stopwatchSection" onclick="switchTab(event)">ストップウォッチを開く</button>
                <button class="tab-btn" data-target="calculatorSection" onclick="switchTab(event)">電卓を開く</button>
                <button class="tab-btn" data-target="memoSection" onclick="switchTab(event)">メモを開く</button>
            </div>
        </div>

        <!-- タイマーセクション -->
        <div id="timerSection" class="section">
        <div class="input-group">
            <label for="notificationName">通知名:</label>
            <input type="text" id="notificationName" placeholder="例: 休憩時間" required>
        </div>

        <div class="input-group">
            <label for="seconds">指定値（数値）と単位:</label>
            <div class="num-unit">
                <input type="number" id="seconds" placeholder="例: 30" min="1" max="259200" required>
                <select id="unit" title="時間の単位">
                    <option value="seconds">秒</option>
                    <option value="minutes">分</option>
                    <option value="hours">時間</option>
                </select>
            </div>
            <small>※時刻（HH:MM）入力がある場合はそちらが優先されます。</small>
        </div>

        <div class="input-group">
            <label for="time">または、時刻で指定（今日のHH:MM）:</label>
            <input type="time" id="time">
            <small>※時刻が入力されている場合は秒指定より優先されます。過去時刻を指定した場合は翌日になります。</small>
        </div>

        <div class="controls">
            <button onclick="setNotification()">通知をセット</button>
            <button onclick="cancelAllTimers()">全てキャンセル</button>
            <button onclick="exportTimers()">保存をエクスポート</button>
            <button onclick="importTimersPrompt()">保存をインポート</button>
            <button onclick="clearStoredTimers()">保存データを削除</button>
        </div>

        <div id="activeTimers" class="active-timers"></div>
        </div>

        <!-- メモセクション -->
        <div id="memoSection" class="section">
            <div class="input-group">
                <label for="noteTitle">タイトル:</label>
                <input type="text" id="noteTitle" placeholder="例: 今日のTODO">
            </div>
            <div class="input-group">
                <label for="noteContent">内容:</label>
                <textarea id="noteContent" rows="6" placeholder="メモ内容を入力..."></textarea>
            </div>
            <div class="controls">
                <button onclick="saveNote()">メモを保存</button>
                <button onclick="clearNoteInputs()">入力をクリア</button>
                <button onclick="exportNotes()">メモをエクスポート</button>
                <button onclick="importNotesPrompt()">メモをインポート</button>
            </div>
            <div class="input-group" style="margin-top:20px;">
                <label>保存済みメモ:</label>
                <div id="notesList"></div>
            </div>
        </div>

        <!-- ストップウォッチセクション -->
        <div id="stopwatchSection" class="section">
            <div class="input-group">
                <label>ストップウォッチ:</label>
                <div id="stopwatchDisplay" style="font-size:32px; font-weight:600; letter-spacing:1px;">00:00.00</div>
            </div>
            <div class="controls">
                <button onclick="startStopwatch()" id="swStartBtn">開始</button>
                <button onclick="pauseStopwatch()" id="swPauseBtn" disabled>一時停止</button>
                <button onclick="resetStopwatch()" id="swResetBtn" disabled>リセット</button>
                <button onclick="lapStopwatch()" id="swLapBtn" disabled>ラップ</button>
            </div>
            <div class="input-group" style="margin-top:20px;">
                <label>ラップ一覧:</label>
                <div id="lapList"></div>
            </div>
            <div class="controls">
                <button onclick="exportLaps()">ラップをエクスポート</button>
                <button onclick="importLapsPrompt()">ラップをインポート</button>
                <button onclick="clearLaps()">ラップをクリア</button>
            </div>
        </div>

        <!-- 電卓セクション -->
        <div id="calculatorSection" class="section">
            <div class="input-group">
                <label>電卓:</label>
                <div id="calculatorDisplay" class="calc-display">0</div>
            </div>
            <div class="calc-keypad">
                <button class="calc-btn calc-clear" onclick="clearCalculator()">C</button>
                <button class="calc-btn calc-clear" onclick="clearEntry()">CE</button>
                <button class="calc-btn calc-op" onclick="backspace()">←</button>
                <button class="calc-btn calc-op" onclick="performOperation('/')">/</button>
                
                <button class="calc-btn calc-num" onclick="appendNumber('7')">7</button>
                <button class="calc-btn calc-num" onclick="appendNumber('8')">8</button>
                <button class="calc-btn calc-num" onclick="appendNumber('9')">9</button>
                <button class="calc-btn calc-op" onclick="performOperation('*')">×</button>
                
                <button class="calc-btn calc-num" onclick="appendNumber('4')">4</button>
                <button class="calc-btn calc-num" onclick="appendNumber('5')">5</button>
                <button class="calc-btn calc-num" onclick="appendNumber('6')">6</button>
                <button class="calc-btn calc-op" onclick="performOperation('-')">-</button>
                
                <button class="calc-btn calc-num" onclick="appendNumber('1')">1</button>
                <button class="calc-btn calc-num" onclick="appendNumber('2')">2</button>
                <button class="calc-btn calc-num" onclick="appendNumber('3')">3</button>
                <button class="calc-btn calc-op" onclick="performOperation('+')" rowspan="2">+</button>
                
                <button class="calc-btn calc-num calc-zero" onclick="appendNumber('0')">0</button>
                <button class="calc-btn calc-num" onclick="appendNumber('.')">,</button>
                <button class="calc-btn calc-equals" onclick="calculate()">=</button>
            </div>
            <div class="input-group" style="margin-top:20px;">
                <label>計算履歴:</label>
                <div id="calcHistory"></div>
            </div>
            <div class="controls">
                <button onclick="exportHistory()">履歴をエクスポート</button>
                <button onclick="importHistoryPrompt()">履歴をインポート</button>
                <button onclick="clearHistory()">履歴をクリア</button>
            </div>
        </div>
    </div>

    <!-- 通知コンテナ -->
    <div class="notification-container" id="notificationContainer"></div>

    <script src="app.js"></script>
</body>
</html>
